# 项目系统需求文档 (SYSTEM.md)

## 1. 项目背景与目标
艺术家与策展人生态信息分散在学术论文、作品集、展览新闻、论坛帖子等多种渠道。项目目标是构建一套 SaaS 平台，实现以下能力：
1. 全网自动化采集艺术相关内容（爬虫 + API 抓取）。
2. NLP 驱动的信息深度挖掘、自动分类、去重、关键词抽取。
3. 结构化/半结构化数据统一入库，可被检索与可视化。
4. 构建真实艺术家—策展人—机构关系网络，辅助学术研究与行业决策。
5. 多租户运营能力：不同团队/研究者的数据隔离、权限管理。

## 2. 主要用户画像
| 角色 | 目标 | 关注点 |
| ---- | ---- | ------- |
| 研究员 | 了解艺术家学术成果与人脉网络 | 数据全面性、学术引用格式 |
| 画廊/机构运营 | 寻找潜在合作艺术家、策展人 | 关系网络、展览记录及时性 |
| 艺术教育者 | 课堂素材、作品案例 | 检索易用性、知识图谱可视化 |
| 平台管理员 | 运行维护系统 | 稳定性、监控、权限管理 |

## 3. 功能需求一览
### 3.1 爬虫管理
1. 网站配置 CRUD（URL、登录、分页、字段 XPath）。
2. 任务调度：立即执行 / 定时 / 周期。
3. 运行监控：进度、错误、重试、代理状态。

### 3.2 信息挖掘
1. 支持深度/递归抓取 (BFS、DFS)，保存来源关系与深度。
2. 文本处理流水线：分词、NER、分类、嵌入向量。
3. 探测网页结构变化并报警。

### 3.3 数据整理与入库
1. ETL 清洗：字段归一化、时间格式、HTML Strip。
2. 自动分类：活动、论坛、展览、投稿、驻地等。
3. 去重：标题 + 艺术家名 + 向量相似度。
4. 索引：全文 + 向量检索接口。

### 3.4 关系网络
1. 实体：艺术家、策展人、机构、展览、作品。
2. 关系：参展、策展、隶属、合作。
3. 图查询 API：最短路径、社区发现、中心性。
4. 可视化：交互过滤、时间轴。

### 3.5 系统与运营
1. 用户管理 & OAuth2/JWT 登录。
2. 租户隔离（Schema per tenant）。
3. 配额与计费（后期可接入 Stripe）。
4. 审计日志、GDPR 删除。

## 4. 非功能需求
| 指标 | 目标 |
| ---- | ---- |
| 吞吐量 | 单节点 100 rps API，爬虫 50 并发 |
| 可用性 | 99.5% 月度 SLA |
| 扩展性 | 横向扩展 Worker、数据库读写分离 |
| 安全性 | OWASP Top 10 防护、WAF、RBAC |
| 合规 | GDPR/CCPA 数据删除、日志脱敏 |
| 国际化 | UI、消息多语言，UTF-8 全局 |

## 5. 技术栈决策
| 层次 | 技术 | 理由 |
| ---- | ---- | ---- |
| 前端 | Vue 3 + Element Plus | 成熟后台组件、TypeScript 支持 |
| 后端 | FastAPI | 高性能、类型注解、自动文档 |
| 爬虫 | Scrapy + Playwright | 并发调度 + JS 渲染 |
| NLP | spaCy / Transformers | 生态完整、可自定义模型 |
| 队列 | Celery + Redis | 简单易运维 |
| 数据库 | PostgreSQL、Elasticsearch、Neo4j、MinIO | 覆盖结构化、全文、图、文件 |
| 工作流 | n8n | 低代码可视化，易集成 |
| 部署 | Docker Compose → K8s | 先易后难的演进 |

## 6. 质量保证
1. 单元/集成测试覆盖率 ≥ 80%
2. ESLint + Flake8 + pre-commit hook
3. GitHub Actions：CI、自动构建镜像、运行测试
4. Sentry：异常监控

## 7. 里程碑
1. M1 – 核心爬虫原型 & 管理 UI
2. M2 – NLP 流水线 & 数据入库
3. M3 – 搜索与图谱可视化
4. M4 – 多租户 SaaS & 生产部署

## 8. Cursor Auto Helper 提示词模板
> 请根据 TODOLIST.md 开始自动化执行任务，完成后回答"是"或"否"以继续下一项，直至所有任务完成并返回"项目已开发完毕"。 